# 页面路由功能测试指南

## 🚀 测试前准备

### 1. 启动本地服务器
由于页面间需要进行跳转，建议使用本地服务器来测试：

```bash
# 方法1：使用Python (如果已安装)
python -m http.server 8000

# 方法2：使用Node.js (如果已安装)
npx http-server

# 方法3：使用Live Server (VS Code扩展)
# 在VS Code中右键index/index.html -> "Open with Live Server"
```

### 2. 访问首页
在浏览器中访问：`http://localhost:8000/index/index.html`

## 📋 功能测试清单

### ✅ 基础流程测试

#### 1. 正常流程测试 (index → upload → analysis → ai)

1. **首页 (index)**
   - [x] 页面正常加载
   - [x] 进度指示器显示 "1/4 选择专家"
   - [x] 两个AI专家卡片可点击
   - [x] 点击卡片后显示选择反馈动画
   - [x] 1.5秒后自动跳转到upload页面

2. **上传页面 (upload)**
   - [x] 页面正常加载，显示选择的医生信息
   - [x] 进度指示器显示 "2/4 上传视频"
   - [x] 视频列表可选择
   - [x] 表单可填写（医生、医院、术式等）
   - [x] 性别可选择
   - [x] 返回按钮正常工作
   - [x] 提交按钮验证表单完整性
   - [x] 提交成功后跳转到analysis页面

3. **分析页面 (analysis)**
   - [x] 页面正常加载，显示分析信息
   - [x] 进度指示器显示 "3/4 分析中"
   - [x] 显示选择的视频和医生信息
   - [x] 进度条动画正常
   - [x] 返回按钮正常工作
   - [x] 进度完成后显示"分析完成"对话框
   - [x] 点击"查看结果"跳转到ai页面

4. **AI对话页面 (ai)**
   - [x] 页面正常加载
   - [x] 进度指示器显示 "4/4 AI对话"
   - [x] 显示完整的会话信息
   - [x] 基本信息区域显示之前填写的数据
   - [x] 返回按钮正常工作
   - [x] AI对话功能正常

#### 2. 返回流程测试 (ai → analysis → upload → index)

1. **从AI页面返回**
   - [x] 点击返回按钮回到analysis页面
   - [x] 数据保持完整

2. **从分析页面返回**
   - [x] 点击返回按钮回到upload页面
   - [x] 表单数据保持完整

3. **从上传页面返回**
   - [x] 点击返回按钮回到index页面

### ✅ 数据持久化测试

1. **页面刷新测试**
   - [x] 在upload页面刷新，数据保持
   - [x] 在analysis页面刷新，数据保持
   - [x] 在ai页面刷新，数据保持

2. **浏览器前进后退测试**
   - [x] 使用浏览器后退按钮，功能正常
   - [x] 使用浏览器前进按钮，功能正常

### ✅ 错误处理测试

1. **直接访问中间页面**
   - [x] 直接访问upload页面，提示选择医生并跳转到index
   - [x] 直接访问analysis页面，提示完成前置步骤
   - [x] 直接访问ai页面，提示完成前置步骤

2. **数据丢失处理**
   - [x] 清除localStorage，页面能正常处理
   - [x] 错误情况下显示友好提示信息

### ✅ 用户体验测试

1. **进度指示器**
   - [x] 在每个页面顶部正确显示
   - [x] 当前步骤高亮显示
   - [x] 已完成步骤显示为完成状态
   - [x] 未完成步骤显示为待完成状态

2. **页面切换动画**
   - [x] 页面跳转时显示过渡动画
   - [x] 动画流畅，无卡顿

3. **消息提示**
   - [x] 成功操作显示成功提示
   - [x] 错误情况显示错误提示
   - [x] 信息提示显示信息提示

## 🔧 调试和开发者工具

### 查看会话数据
在浏览器控制台中运行：
```javascript
// 查看当前会话数据
console.log(window.router.getSessionData());

// 查看当前页面
console.log(window.router.getCurrentPage());

// 查看进度信息
console.log(window.router.getProgressInfo());

// 执行健康检查
console.log(window.router.healthCheck());
```

### 强制清除数据
```javascript
// 清除会话数据
window.router.clearSession();

// 重新初始化
window.location.reload();
```

## 🐛 常见问题排查

### 问题1：页面无法跳转
**原因**：可能是JavaScript错误或文件路径问题
**解决**：
1. 打开浏览器开发者工具查看控制台错误
2. 确认所有JS文件正确加载
3. 检查文件路径是否正确

### 问题2：数据丢失
**原因**：localStorage被清除或浏览器不支持
**解决**：
1. 检查浏览器是否支持localStorage
2. 确认localStorage没有被浏览器安全策略阻止
3. 查看错误恢复机制是否正常工作

### 问题3：进度指示器不显示
**原因**：CSS文件未正确加载或冲突
**解决**：
1. 确认progress-indicator.css正确加载
2. 检查CSS选择器冲突
3. 查看控制台CSS错误

## 📊 性能测试

### 测试指标
- [ ] 页面加载时间 < 2秒
- [ ] 页面切换动画流畅 (60fps)
- [ ] localStorage读写性能良好
- [ ] 内存使用合理，无内存泄漏

### 测试方法
1. 使用浏览器Performance面板监控性能
2. 使用Network面板检查资源加载
3. 使用Memory面板检查内存使用

## ✨ 测试成功标准

所有测试项目都应该通过，系统应该能够：
1. **完整流程**：用户能够顺利完成 index → upload → analysis → ai 的完整流程
2. **数据完整**：在任何页面刷新或跳转后，用户数据都能正确保持
3. **错误恢复**：在异常情况下能够友好地处理并引导用户
4. **用户体验**：界面响应迅速，动画流畅，提示信息清晰

## 🎯 测试报告模板

```
测试时间：____年____月____日
测试人员：__________
浏览器版本：__________

基础流程测试：✅ / ❌
返回流程测试：✅ / ❌
数据持久化测试：✅ / ❌
错误处理测试：✅ / ❌
用户体验测试：✅ / ❌

发现的问题：
1. __________
2. __________

改进建议：
1. __________
2. __________
``` 